<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <title>Document</title>
    <style>
        .box {
            width: 300px;
            height: 300px;
            background-color: lightgoldenrodyellow;
        }
    </style>
</head>

<body>
    <div class="container mt-3 text-center">
        <table class="table table-hover align-middle text-center">
            <thead>
                <tr>
                    <th scope="col" id="item">#</th>
                    <th scope="col">品項</th>
                    <th scope="col">單價</th>
                    <th scope="col">數量</th>
                    <th scope="col">單項總價</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th scope="row">1</th>
                    <td><img src="https://cdn-icons-png.flaticon.com/128/13371/13371459.png" alt="">
                    </td>
                    <td><input type="number" class="form-control my-price" id="item1Price" value="100"></td>
                    <td><input type="number" class="form-control my-num" id="item1Num" value="2"></td>
                    <td><input type="text" class="form-control my-total" id="item1Total" value="" readonly></td>
                </tr>
                <tr>
                    <th scope="row">2</th>
                    <td><img src="https://cdn-icons-png.flaticon.com/128/13371/13371581.png" alt=""></td>
                    <td><input type="number" class="form-control my-price" id="item2Price" value="200"></td>
                    <td><input type="number" class="form-control my-num" id="item2Num" value="2"></td>
                    <td><input type="text" class="form-control my-total" id="item2Total" value="" readonly></td>
                </tr>
                <tr>
                    <th scope="row">3</th>
                    <td><img src="https://cdn-icons-png.flaticon.com/128/13371/13371283.png" alt=""></td>
                    <td><input type="number" class="form-control my-price" id="item3Price" value="300"></td>
                    <td><input type="number" class="form-control my-num" id="item3Num" value="2"></td>
                    <td><input type="text" class="form-control my-total" id="item3Total" value="" readonly></td>
                </tr>

                <tr>
                    <td colspan="5">
                        <div class="result" id="result">

                        </div>
                    </td>
                    <!-- <td></td>
                    <td></td>
                    <td></td>
                </tr> -->
            </tbody>
        </table>

        <button type="button" class="btn btn-primary mx-auto w-100" id="sumBtn">Button 1</button>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
        </script>


    <script>
        // 利用 抓到 class 後，到 上上一層的 tr 下 抓其它的class ，就不用每個 input 綁一個 id 
        $(document).ready(function () {
            // 先在 ready 下 寫程式，再將程式函式化，最後將函式移至程式最前端，方便管理 

            
            const myPrice = $('.my-Price');
            const myNum = $('.my-num');
            const myTotal = $('.my-total');
            
            let sumTotal = 0;
            myNum.each(collection, function (idx, element) {
                console.log('index', index);
                console.log('element', element);
                console.log('this', this);
            });


            // 因為Price 通常不會，所以將功能設在 Num 上 
            myNum.change(function (e) {

                let trObj = $(this).parent().parent(); // 抓到 input 上上一層的 tr
                let nowPrice = trObj.find('.my-price'); // 從 tr 下所有的tag裡找到 class 裡有 my-price
                let nowNum = trObj.find('.my-num');
                let nowTotal = trObj.find('.my-total');

                // console.log(nowPrice)
                let getPrice = Number(nowPrice.val())
                let getNum = Number(nowNum.val());
                let resultTotal = getNum * getPrice;
                nowTotal.val(resultTotal)
            });



        })
    </script>


</body>

</html>